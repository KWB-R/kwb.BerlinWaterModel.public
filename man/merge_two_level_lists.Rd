% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helper_functions.R
\name{merge_two_level_lists}
\alias{merge_two_level_lists}
\title{Merge nested two-level lists while preserving structure}
\usage{
merge_two_level_lists(x, y, prefer = c("left", "right"))
}
\arguments{
\item{x}{A nested list with structure \code{list(top_id = list(sub_id = tibble))}.}

\item{y}{A nested list with the same structure as \code{x}.}

\item{prefer}{Character string, either \code{"left"} (default) or \code{"right"}.
If \code{"left"}, values from \code{x} are kept in case of duplicates.
If \code{"right"}, values from \code{y} overwrite those in \code{x}.}
}
\value{
A nested list with the same two-level structure containing the
union of all elements from \code{x} and \code{y}.
}
\description{
This function merges two nested lists of the form
\code{list(top_id = list(sub_id = tibble))}, as used in the
BerlinWaterModel package. The structure (top-level and sub-level keys)
is preserved, and missing elements are added. If the same element exists
in both lists, the preferred side can be chosen.
}
\examples{
library(tibble)

a <- list("S03" = list("S21" = tibble(a = 1, b = 2)))
b <- list("S03" = list("S07" = tibble(a = 3, b = 4)))
c <- list("S01" = list("S02" = tibble(a = 5, b = 6)))

# Default: prefer = "left"
merge_two_level_lists(a, b)

# Right side overwrites in case of duplicates
merge_two_level_lists(a, b, prefer = "right")

# Merge more than two lists using purrr::reduce
purrr::reduce(list(a, b, c), merge_two_level_lists)

}
